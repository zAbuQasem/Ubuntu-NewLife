#!/usr/bin/env bash
# memory block: show only if usage >= 70%; display remaining (free-ish) memory instead of used.
# Using MemAvailable for realistic indicator of reclaimable memory.
THRESH=70
awk -v thresh="$THRESH" '
	/MemTotal/ {t=$2} /MemAvailable/ {a=$2}
	END {
		if(t==0) exit 0
		u=t-a; pct=(u*100)/t
		if (pct < thresh) exit 0
		# remaining GiB
		rem_g = a/1024/1024
		printf("ï¡š %.1fG free (%d%% used)\n", rem_g, pct)
	}
' /proc/meminfo